# Week of 2024-11-04 to 2024-11-11 (32)

### GHFirst (17)

- [Revert "add supports_coalescing property in c10d::Backend  to determine whether backend supports coalescing (#135338)"](https://github.com/pytorch/pytorch/commit/1400fedf76a2e357d0abc539920ce097ed1bee0d)
  - Sorry but this is failing internally. Please see D65663382 for more details ([comment](https://github.com/pytorch/pytorch/pull/135338#issuecomment-2465911854))
- [Revert "Tighten type hints for tensor arithmetic (#135392)"](https://github.com/pytorch/pytorch/commit/beae7725be141f4539d87a58b455b5467118dcdf)
  - Sorry but this is breaking internally. See D65641103 for more details ([comment](https://github.com/pytorch/pytorch/pull/135392#issuecomment-2465906839))
- [Revert "[cpu] Modify inductor opt flag --- ftree-loop-vectorize (#136827)"](https://github.com/pytorch/pytorch/commit/347f96061f1cff603983b9be19ec92b374329a5b)
  - Sorry but this breaks internally. See D65605094 for more details ([comment](https://github.com/pytorch/pytorch/pull/136827#issuecomment-2465805271))
- [Revert "[Inductor][CPU] Fuse SmoothQuant int8 linear pattern (#139595)"](https://github.com/pytorch/pytorch/commit/a7724518c05006368a48b52b3a4ef69b109dd17c)
  - Sorry but the newly added tests in test_mkldnn_pattern_matcher.py fail internally. See D65661038 for more details ([comment](https://github.com/pytorch/pytorch/pull/139595#issuecomment-2465797016))
- [Revert "Make Context to be Device-agnostic Step by Step (2/N) (#136526)"](https://github.com/pytorch/pytorch/commit/80d0356b111589fd0425d3668b8c6d4a203e8548)
  - This fails to build internally. See D65604944 for more details ([comment](https://github.com/pytorch/pytorch/pull/136526#issuecomment-2465790157))
- [Revert "[experimental] async-tp impl with cutlass-based, progress aware kernel (#139227)"](https://github.com/pytorch/pytorch/commit/36e0f119d0359a3ad75d0ab665353c314edc20aa)
  - Need to address internal build failure D65605027 ([comment](https://github.com/pytorch/pytorch/pull/139227#issuecomment-2463204467))
- [Revert "Fix the use of fsspec transactions (#135541)"](https://github.com/pytorch/pytorch/commit/a60bc051e3755a6a87ad03eee84a640af3f28682)
  - Breaking internally. See D65551490 ([comment](https://github.com/pytorch/pytorch/pull/135541#issuecomment-2462774239))
- [Revert "[2/N] Replace c10::sv with std::sv (#139456)"](https://github.com/pytorch/pytorch/commit/7e023863031146e4d2e508ef99e4a167293359ee)
  - Sorry but this breaks internally. @ezyang can you please help get this landed? See D65546398 for more details ([comment](https://github.com/pytorch/pytorch/pull/139456#issuecomment-2462768891))
- [Revert "[pt2 logging] move remote cache get/put logging up one level (#139423)"](https://github.com/pytorch/pytorch/commit/9018326bb836f881292d61adbd0903fd3965e827)
  - Reverted internally. See D65541060 for more details ([comment](https://github.com/pytorch/pytorch/pull/139423#issuecomment-2460765579))
- [Revert "[BE] And delete `DeprecatedTypProperties` cast (#139358)"](https://github.com/pytorch/pytorch/commit/06ad4044019a10bc8561b4f699d9bf77254bc04f)
  - And it was backed out again due to the internal usages of deprecated API ([comment](https://github.com/pytorch/pytorch/pull/139358#issuecomment-2459740090))
- [Revert "Don't use deprecated type properties in UpsampleKernel (#139399)"](https://github.com/pytorch/pytorch/commit/53299b8a38b1354f41505d0c1ecb7742f77ed308)
  - And it was backed out again due to the internal usages of deprecated API ([comment](https://github.com/pytorch/pytorch/pull/139358#issuecomment-2459740090))
- [Revert "Deprecate `torch._utils.is_compiling()` and `torch._dynamo.external_utils.is_compiling()` (#127690)"](https://github.com/pytorch/pytorch/commit/1d28b8b6d52c69607bedf0a7c00b9a859adf6f4d)
  - Sorry but this is breaking internally. More details in D65483292 ([comment](https://github.com/pytorch/pytorch/pull/127690#issuecomment-2458381056))
- [Revert "[dynamo][guards] Consider tensors as immutable for dict tag matches (#139560)"](https://github.com/pytorch/pytorch/commit/4d5cc1b4efa2c07a798c2b216990056153c6fe3a)
  - Sorry but this seems to be breaking internal tests. Please see D65430317 for more details ([comment](https://github.com/pytorch/pytorch/pull/139560#issuecomment-2457620720))
- [Revert "[BE] And delete `DeprecatedTypProperties` cast (#139358)"](https://github.com/pytorch/pytorch/commit/1b6f0b2a00cf411d708e0fda40883724cd06e4ff)
  - Change reverted internally due to broken builds. See D65378845 ([comment](https://github.com/pytorch/pytorch/pull/139358#issuecomment-2455959040))
- [Revert "Don't use deprecated type properties in UpsampleKernel (#139399)"](https://github.com/pytorch/pytorch/commit/4a3ee964274901464f47ff133cec5e48fb4e33c6)
  - Change reverted internally due to broken builds. See D65378845 ([comment](https://github.com/pytorch/pytorch/pull/139358#issuecomment-2455959040))
- [Revert "Refactor FxGraphDrawer to use HTML-like labels (#137726)"](https://github.com/pytorch/pytorch/commit/6dada2136aa3cd8d3752c1b7f10abf5e97c838d1)
  - Sorry for reverting your change, but it looks like some internal components are failing after this change and need to be updated ([comment](https://github.com/pytorch/pytorch/pull/137726#issuecomment-2455332612))
- [Revert "[SymmetricMemory] introduce a binding for cuMemset32Async (#138755)"](https://github.com/pytorch/pytorch/commit/3ca794783f3fd7b3fec97135282ffa5426ddc73f)
  - Sorry but this breaks internally.  Can you please fix this PR so it works internally and re-merge it? See D65401876 for more details ([comment](https://github.com/pytorch/pytorch/pull/138755#issuecomment-2455173596))

### Ignored Signal (1)

- [Revert "Enable inductor-rocm workflow for all trunk commits AND inductor-related PRs (#138623)"](https://github.com/pytorch/pytorch/commit/fc6496c70364d6da4e3a5c4bd03e1892f5da82de)
  - I think the link failure is legit, it complains about the wrong concurrency setting in the workflow ([comment](https://github.com/pytorch/pytorch/pull/138623#issuecomment-2465277228))

### Landrace (1)

- [Revert "Turn static inline into static function (#139843)"](https://github.com/pytorch/pytorch/commit/68f1b52d8a65cf0f3f49b93410fb76a3dbc1ba80)
  - Sorry but this is causing tests to fail on trunk. See [GH job link](https://github.com/pytorch/pytorch/actions/runs/11729669425/job/32675829894) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/72d3f5b26d90396f7a357fa3e5d82656ca74c102) ([comment](https://github.com/pytorch/pytorch/pull/139843#issuecomment-2463354131))

### Not through pytorchbot (3)

- [Revert D65490202 (#140142)](https://github.com/pytorch/pytorch/commit/411203e7c1daf687b85f36e07e45d4535c2b5b75)
- [Revert #137523: Add functionality to call dump function of NCCL profiler plugin (#139847)](https://github.com/pytorch/pytorch/commit/1127c8259296235b164087bfb2442dcb6224fb2b)
- [Revert D65290089 (#139893)](https://github.com/pytorch/pytorch/commit/52446d7f300c251a87d14196a597accab7e758dc)

### No Signal (7)

- [Revert "Fix typo in associative_scan tests (#139929)"](https://github.com/pytorch/pytorch/commit/3483f7809ecda6868d952e2d7a148572c087876f)
  - This test is breaking in trunk somehow, which is really weird. Might be a land race. functorch/test_control_flow.py::AssociativeScanTests::test_associative_scan_binary_operator_compile_mode_compile_dynamic_shape_combine_mode_pointwise_reverse_False_cuda [GH job link](https://github.com/pytorch/pytorch/actions/runs/11747748990/job/32732254909) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/7fa94f03635709a30ef85c6955dcdd5051e72e71) ([comment](https://github.com/pytorch/pytorch/pull/139929#issuecomment-2465773366))
- [Revert "[inductor] fix test_linear_binary_dynamic_shapes_cpp_wrapper (#139942)"](https://github.com/pytorch/pytorch/commit/f0ffaa5e1644d4978e9f0e54557a7964c574dd52)
  - Sorry for revert this, but I think we miss running the test and it is now failing in trunk ([comment](https://github.com/pytorch/pytorch/pull/139942#issuecomment-2463599298))
- [Revert "Loosen last dim contiguity for sdpa constraint to include last dim 0,1 (#139787)"](https://github.com/pytorch/pytorch/commit/604e353caefb2fdf777ef02035232d54c3642798)
  - Sorry for reverting this, but I think it is failing on ROCm ([comment](https://github.com/pytorch/pytorch/pull/139787#issuecomment-2461234683))
- [Revert "Use Manylinux2_28 for wheel builds (#138732)"](https://github.com/pytorch/pytorch/commit/dd6738c1ad6dd5c13f583a8236182e4d5aff17ad)
  - Reverting for now will be relanding ([comment](https://github.com/pytorch/pytorch/pull/138732#issuecomment-2460570980))
- [Revert "[Inductor][CPU] Fuse SmoothQuant int8 linear pattern (#139595)"](https://github.com/pytorch/pytorch/commit/44e4949bcfda3bb41f3d70f0e3f4b137a8087d89)
  - It broke number of tests, see https://hud.pytorch.org/pytorch/pytorch/commit/22e89ea2aaa3e0ef0ec4504bd2dbf230447a6d2a ([comment](https://github.com/pytorch/pytorch/pull/139595#issuecomment-2459754355))
- [Revert "Enable cppcoreguidelines-special-member-functions (#139132)"](https://github.com/pytorch/pytorch/commit/10d77293335b01ab97ef3271a3a0ea38dbccf843)
  - Sorry but this fails on trunk. See inductor/test_mkldnn_pattern_matcher.py::TestPatternMatcher::test_smooth_quant_with_int_mm [GH job link](https://github.com/pytorch/pytorch/actions/runs/11699366379/job/32591132460) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/22e89ea2aaa3e0ef0ec4504bd2dbf230447a6d2a) ([comment](https://github.com/pytorch/pytorch/pull/139132#issuecomment-2459743145))
- [Revert "Tighten type hints for tensor arithmetic (#135392)"](https://github.com/pytorch/pytorch/commit/6add86a29f6d25c2468207be0f5f4937b27b7e3b)
  - Sorry but this is breaking lint on trunk. See [GH job link](https://github.com/pytorch/pytorch/actions/runs/11673543178/job/32504499599) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/bf5cd8d0116d90d24b8acb38d578b8952dab22ef) ([comment](https://github.com/pytorch/pytorch/pull/135392#issuecomment-2455908056))

### Weird (3)

- [Revert "[c10d][Logging] Remove args and kwargs from c10d logging (#140169)"](https://github.com/pytorch/pytorch/commit/58b661cda2c002a8e1ac3bee494bfe1f7420437c)
  - Man, this test really wants to fail on trunk. Sorry. Details:  distributed/test_c10d_logger.py::C10dErrorLoggerTest::test_exception_logger [GH job link](https://github.com/pytorch/pytorch/actions/runs/11751023962/job/32740983427) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/e3b2f04f052fbc5dcf728f33ac59917d087c324c) ([comment](https://github.com/pytorch/pytorch/pull/140169#issuecomment-2465933413))
- [Revert "Fix split decomp returning self (#140065)"](https://github.com/pytorch/pytorch/commit/7eb66173e2b321985efefd319d75882a56ff89ef)
  - Diff been imported internally, but merged externally. And the internal diff has been updated so the diff and PR are now mismatched.  Reverting this PR to get things back into a consistent state. See D65635070 ([comment](https://github.com/pytorch/pytorch/pull/140065#issuecomment-2465928027))
- [Revert "[Reland] Use static_assert to detect get_type_index used in device code (#139966)"](https://github.com/pytorch/pytorch/commit/07ad74635bb1dca02fcdf1be2f990e59effd296c)
  - This approach will prevent one from using get_type_index from device code ([comment](https://github.com/pytorch/pytorch/pull/139966#issuecomment-2465701260))
