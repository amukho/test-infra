# Week of 2025-03-03 to 2025-03-10 (24)

### GHFirst (8)

- [Revert "Move get accelerator to use build time flags when possible (#146098)"](https://github.com/pytorch/pytorch/commit/b246cd7b820d4afdf402a3feb591ce1ea50910d5)
  - Still fails with cuda build on a non-gpu machine ([comment](https://github.com/pytorch/pytorch/pull/146098#issuecomment-2707191770))
- [Revert "[ROCm] Bump AOTriton to 0.9.1b (#148433)"](https://github.com/pytorch/pytorch/commit/96176e32a924c2774d6d94c1d310cae7b28232bf)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/148433#issuecomment-2704638858))
- [Revert "[Inductor] Avoid tensor slice overflow for large step (#147433)"](https://github.com/pytorch/pytorch/commit/841451af9f8c4a49d720a0132532c5468963f643)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/147433#issuecomment-2704506627))
- [Revert "[fx] Move map_aggregate to C++ (#148243)"](https://github.com/pytorch/pytorch/commit/92beda54c8707d476ea8bc193ce79a37653d2e49)
  - breaking internal builds [T216910920] ([comment](https://github.com/pytorch/pytorch/pull/148243#issuecomment-2698724058))
- [Revert "[fx] Move Node._update_args_kwargs to C++ (#148260)"](https://github.com/pytorch/pytorch/commit/17d003fe75c2ef7d2c52553416f812ffe39df7ab)
  - breaking internal builds [T216910920] ([comment](https://github.com/pytorch/pytorch/pull/148243#issuecomment-2698724058))
- [Revert "[fx] Move Node._prepend/Node._remove_from_list to C++ (#148261)"](https://github.com/pytorch/pytorch/commit/97b9e68bc657ccac52bb9b9b962d8d8776bec630)
  - breaking internal builds [T216910920] ([comment](https://github.com/pytorch/pytorch/pull/148243#issuecomment-2698724058))
- [Revert "Better log message to update pr_time_benchmarks/expected_results.csv (#148303)"](https://github.com/pytorch/pytorch/commit/6fb18ff6850aa60a8044b76151c57d00061bd5ee)
  - breaking internal builds [T216910920] ([comment](https://github.com/pytorch/pytorch/pull/148243#issuecomment-2698724058))
- [Revert "[import][inductor] Simplify grid handling (#147583)"](https://github.com/pytorch/pytorch/commit/608377d3418653932d6461093a77db44e720290d)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/147583#issuecomment-2693016036))

### Ignored Signal (4)

- [Revert "[PGNCCL] Launch kernel on current stream & remove `record_stream` entirely (#148590)"](https://github.com/pytorch/pytorch/commit/9cb25f0ea28647c4a89b8f38d048d91751a0931b)
  - PR break backward compat test ([comment](https://github.com/pytorch/pytorch/pull/148590#issuecomment-2708641172))
- [Revert "Remove Cuda 12.4 from nightly Binaries  (#148625)"](https://github.com/pytorch/pytorch/commit/99da439d1090e305cf91b129994c67ee98ec08a8)
  - Broke lint ([comment](https://github.com/pytorch/pytorch/pull/148625#issuecomment-2707415005))
- [Revert "Enable onednn in pytorch for ppc64le architecture (#143743)"](https://github.com/pytorch/pytorch/commit/cf9efbdf16c9ed2c39ff96b0e9b3a562d29f6625)
  - windows build failures look related [GH job link](https://github.com/pytorch/pytorch/actions/runs/13705127978/job/38329845095) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/d4cf0e5af406239881acfeb4f9e4f62373faca8b) ([comment](https://github.com/pytorch/pytorch/pull/143743#issuecomment-2704903253))
- [Revert "Bump onnxscript to 0.2.2 in CI (#148388)"](https://github.com/pytorch/pytorch/commit/9d196edb7d1651c2b9bf698ac342ccc75cf362e6)
  - broke libtorch debug build? [GH job link](https://github.com/pytorch/pytorch/actions/runs/13646179239/job/38152039312) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/7ab6749ec7db32e0b3cdfd19db087f15dd0bebe2) ([comment](https://github.com/pytorch/pytorch/pull/148388#issuecomment-2698665495))

### Landrace (1)

- [Revert "[dtensor] add aten._scaled_dot_product_cudnn_attention.default op support (#148377)"](https://github.com/pytorch/pytorch/commit/c9edd37ffb8c824db7da4e353a783b9738d71cca)
  - broke lint [GH job link](https://github.com/pytorch/pytorch/actions/runs/13683650448/job/38261818684) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/9eef457c0241f87097a2ca7625f9961e31f3adcd) probably landrace ([comment](https://github.com/pytorch/pytorch/pull/148377#issuecomment-2701903810))

### No Signal (10)

- [Revert "[dynamo] allow global import `from collections import deque` in user code (#148676)"](https://github.com/pytorch/pytorch/commit/19a39a7a0644d17abb3eb7bdb03d39b1eb9ffc9b)
  - Looks like it broke ROCM, see https://hud.pytorch.org/hud/pytorch/pytorch/f1444f006c4860c5d1b403a55890d52e5bc9752c/1?per_page=50&name_filter=linux-focal-rocm6.3-py3.10%20%2F%20test%20(default%2C%201&mergeLF=true ([comment](https://github.com/pytorch/pytorch/pull/148676#issuecomment-2709057326))
- [Revert "[cutlass backend] Forward fix for less aligned gemm shapes (#148521)"](https://github.com/pytorch/pytorch/commit/0f852641c29534a791315405f245bbc498ac87bc)
  - mistakes when writing the tests ([comment](https://github.com/pytorch/pytorch/pull/148521#issuecomment-2707637965))
- [Revert "[cutlass backend] fix assertion that prevent self multiplication  (#148233)"](https://github.com/pytorch/pytorch/commit/bb94b65da776f5ecac21d989c9c9e9ebc8c35154)
  - mistake in PR  ([comment](https://github.com/pytorch/pytorch/pull/148233#issuecomment-2707440106))
- [Revert "Fix `torch.nn.functional.hardswish` gradients corner case (#148049)"](https://github.com/pytorch/pytorch/commit/abcca2fcbbbf47373ed97372ef4feed47e1856d1)
  - This may be causing an accuracy failure on inductor ([comment](https://github.com/pytorch/pytorch/pull/148049#issuecomment-2706839169))
- [Revert "[cutlass backend] fix assertion that prevent self multiplication  (#148233)"](https://github.com/pytorch/pytorch/commit/28b68b46bc974616ba2127552d37de42b39cd576)
  - mistake in PR  ([comment](https://github.com/pytorch/pytorch/pull/148233#issuecomment-2704534995))
- [Revert "[cutlass backend] Forward fix for less aligned gemm shapes (#148521)"](https://github.com/pytorch/pytorch/commit/ae6bb584838e627cfc9df5b90b138cca0e233203)
  - broke lint: [GH job link](https://github.com/pytorch/pytorch/actions/runs/13690720601/job/38283359447) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/ad49cfc9f0a8a4d8881b3734edd8c33a087c8b97) ([comment](https://github.com/pytorch/pytorch/pull/148521#issuecomment-2702980028))
- [Revert "Subprocess compile (#146134)"](https://github.com/pytorch/pytorch/commit/897fd9b5142ef2191cf4b83098509b6774edf928)
  - looks like it broke slow jobs, see https://hud.pytorch.org/hud/pytorch/pytorch/e1dee4ccb3df4d5a196bff451c07863f2f4fc2d6/3?per_page=50&name_filter=slow%20%2F%20linux-focal-rocm ([comment](https://github.com/pytorch/pytorch/pull/146134#issuecomment-2702239123))
- [Revert "[Inductor] Record Tritonâ€™s Base32 Cache Key in `.best_config` for Debugging (#147019)"](https://github.com/pytorch/pytorch/commit/63778cb8a03b79ae6fce9742b612ead204313611)
  - broke inductor test inductor/test_max_autotune.py::TestMaxAutotune::test_cat_max_autotune_extern [GH job link](https://github.com/pytorch/pytorch/actions/runs/13653495421/job/38171259603) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/e3e45d90d8578083da8b51a3b1d911e9a4523e5b) on inductor workflow and rocm workflow ([comment](https://github.com/pytorch/pytorch/pull/147019#issuecomment-2698677222))
- [Revert "[fx] Optimizations for node name generation (#148288)"](https://github.com/pytorch/pytorch/commit/611b0e9bc4e86bea26b96e166e74f20af738973a)
  - something in this stack broke some dynamo and higher order ops tests like higher_order_ops/test_invoke_subgraph.py::TestInvokeSubgraphCompile::test_dedupe [GH job link](https://github.com/pytorch/pytorch/actions/runs/13645082540/job/38149882002) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/8531d247ba411993f9a10686d70514f6945f9960).   dynamo/test_graph_deduplication did run on the PR but the higher_order_ops one didn't, probably combo of landrace and bad TD ([comment](https://github.com/pytorch/pytorch/pull/148288#issuecomment-2698365172))
- [Revert "[fx] Optimize TracerBase.create_arg and Graph._gen_python_code (#148292)"](https://github.com/pytorch/pytorch/commit/ed9055c303ec1c94385c6fb0fe07ab49ef4f4833)
  - something in this stack broke some dynamo and higher order ops tests like higher_order_ops/test_invoke_subgraph.py::TestInvokeSubgraphCompile::test_dedupe [GH job link](https://github.com/pytorch/pytorch/actions/runs/13645082540/job/38149882002) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/8531d247ba411993f9a10686d70514f6945f9960).   dynamo/test_graph_deduplication did run on the PR but the higher_order_ops one didn't, probably combo of landrace and bad TD ([comment](https://github.com/pytorch/pytorch/pull/148288#issuecomment-2698365172))

### Weird (1)

- [Revert "Add a stable TORCH_LIBRARY to C shim (#148124)"](https://github.com/pytorch/pytorch/commit/275a7c5dbb2cab6410f5af0ef038f1280370928c)
  - Sorry for reverting your PR, but somehow it caused test failures in newly introduced tests, see https://hud.pytorch.org/hud/pytorch/pytorch/main/1?per_page=50&name_filter=pull%20%2F%20linux-focal-cuda12.6-py3.10-gcc11-sm89%20%2F%20test%20(default%2C%201&mergeLF=true ([comment](https://github.com/pytorch/pytorch/pull/148124#issuecomment-2709057833))
