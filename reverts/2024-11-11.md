# Week of 2024-11-11 to 2024-11-18 (29)

### GHFirst (13)

- [Revert "Add NHWC support for group normalization  (#126635)"](https://github.com/pytorch/pytorch/commit/109f8274a82a8077eb32d29cdf6b865c151c779c)
  - Reverted internally at Meta, see D65979564 ([comment](https://github.com/pytorch/pytorch/pull/126635#issuecomment-2480130943))
- [Revert "cpp_wrapper_cpu: Ensure reinterpret_view results in RAIIAtenTensorHandle (#139411)"](https://github.com/pytorch/pytorch/commit/222d4b48b1fdb77b36bb9b2566be550becb6acbd)
  - breaking internal inductor test ([comment](https://github.com/pytorch/pytorch/pull/139411#issuecomment-2477235367))
- [Revert "Enable all fixed cpp_wrapper tests (#139412)"](https://github.com/pytorch/pytorch/commit/25048e538115e38a8aed2a96f6a5db09d3162923)
  - breaking internal inductor test ([comment](https://github.com/pytorch/pytorch/pull/139411#issuecomment-2477235367))
- [Revert "Fix broken AOTInductor node and kernel counts (#139435)"](https://github.com/pytorch/pytorch/commit/14641c0393a89d21ede069ac7511b7dd9e9afba6)
  - breaking internal inductor test ([comment](https://github.com/pytorch/pytorch/pull/139411#issuecomment-2477235367))
- [Revert "[logging] Overhaul dynamo_timed and CompilationMetrics logging. (#139849)"](https://github.com/pytorch/pytorch/commit/d63eb3c46cd3c93d8193c4da3be8ff49a6a82100)
  - Breaking an internal tests + there is a bug according to the author ([comment](https://github.com/pytorch/pytorch/pull/139849#issuecomment-2474459094))
- [Revert "[aoti] Remove dir after packaging (#140022)"](https://github.com/pytorch/pytorch/commit/b4cc5d38b416c8e74a6ba8f537a75571a3cdd563)
  - sorry I realized I need to land from internal ([comment](https://github.com/pytorch/pytorch/pull/140022#issuecomment-2473814720))
- [Revert "[pytorch/profiler] Profiler NCCL metadata can now contain collective Input and Ouput Tensor addrs (#139837)"](https://github.com/pytorch/pytorch/commit/97d995a0d396e6c1bdc7ddad73e77467fdebc7f6)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/139837#issuecomment-2473466607))
- [Revert "[inductor] Refactor reduction type choices into V.choices (#139585)"](https://github.com/pytorch/pytorch/commit/069a71023bb44afd991c0ed513125c953d67b346)
  - breaking internal builds, see D65800124 ([comment](https://github.com/pytorch/pytorch/pull/139585#issuecomment-2471392822))
- [Revert "[inductor] Support fixed triton configs defined at compile time (#140217)"](https://github.com/pytorch/pytorch/commit/c0ddd10f6d3ddc0df3daef7c316e2df688304c34)
  - breaking internal builds, see D65800124 ([comment](https://github.com/pytorch/pytorch/pull/139585#issuecomment-2471392822))
- [Revert "[logging][ez] Add timer logging for pickling and unpickle for object based collective (#139757)"](https://github.com/pytorch/pytorch/commit/e4195f80609ff1f944c03b7eb82d4a9b5bde8daf)
  - reverted internally, see D65682470 ([comment](https://github.com/pytorch/pytorch/pull/139757#issuecomment-2471316405))
- [Revert "[7/N] Fix Wextra-semi warning (#140225)"](https://github.com/pytorch/pytorch/commit/dbb55b448b02c46ff92d38a3aa5bb7c3a956bce8)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/140225#issuecomment-2469312229))
- [Revert "[Partitioner] Enumerate partitions by iterating partition ids (#136598)"](https://github.com/pytorch/pytorch/commit/222175b3d59f54e02c67db7d4a8ff3c4c69fb45f)
  - breaking internal ExecuTorch tests ([comment](https://github.com/pytorch/pytorch/pull/136598#issuecomment-2469294995))
- [Revert "[dynamo] Remove dead code path for capturing `__class__` in `UserFunctionVariable` (#140034)"](https://github.com/pytorch/pytorch/commit/412df504548816a3f6caf542081e35e8b3e57e8a)
  - breaking internal tests, see D65755044 ([comment](https://github.com/pytorch/pytorch/pull/140034#issuecomment-2469290205))

### Ignored Signal (1)

- [Revert "[aoti] Remove dir after packaging (#140022)"](https://github.com/pytorch/pytorch/commit/d48ea29b9ab81e90065b8e3d87ddc3dac1f0a120)
  - Sorry for reverting your change but the lint failure is legit ([comment](https://github.com/pytorch/pytorch/pull/140022#issuecomment-2471847439))

### Landrace (1)

- [Revert "Allow NJT by default for weights_only torch.load (#140304)"](https://github.com/pytorch/pytorch/commit/09bab7566ac65d609f44b1891cd4f9b79892d900)
  - A bunch of failure shows up in trunk after this lands, so probably a landrace ([comment](https://github.com/pytorch/pytorch/pull/140304#issuecomment-2469602096))

### Not through pytorchbot (1)

- [Revert "revert test repro logging" (#140749)](https://github.com/pytorch/pytorch/commit/6094f17ada0888eebad0664de7dc6a3e7761c694)

### No Signal (12)

- [Revert "[C10D] call destroy_process_group after MultiProcess tests (#140820)"](https://github.com/pytorch/pytorch/commit/bf8709b08aaa1d46512790283f43188cf2c496c5)
  - failures on trunk not on PR CI ([comment](https://github.com/pytorch/pytorch/pull/140820#issuecomment-2480644227))
- [Revert "create a new torch.cuda.memory_usage_in_bytes api (#140719)"](https://github.com/pytorch/pytorch/commit/03b7ec9237a8049e54b87304cfb11fd8bd767fcd)
  - Sorry for reverting your change, but the test is flaky on ROCm ([comment](https://github.com/pytorch/pytorch/pull/140719#issuecomment-2479832082))
- [Revert "[FlexAttention] Fix multiple calls to flex bug (#140761)"](https://github.com/pytorch/pytorch/commit/210de39872232ad2e19effd50b43d8b0c5a81308)
  - Sorry for reverting this, but it is failing on ROCm ([comment](https://github.com/pytorch/pytorch/pull/140761#issuecomment-2479819212))
- [Revert "Made FlexAttention error on subgraph lowering failure (#140331)"](https://github.com/pytorch/pytorch/commit/de34f581f1f440136a67cbca0b74dd5f0dc835fb)
  - Looks like it regressed trunk, see https://hud.pytorch.org/hud/pytorch/pytorch/55f1959fc148240e55a91d7625c750736ea5f2e4/1?per_page=50&name_filter=linux-focal-cuda12.1-py3.10-gcc9-sm86&mergeLF=true ([comment](https://github.com/pytorch/pytorch/pull/140331#issuecomment-2479435705))
- [Revert "[dynamo] add SymNode bitwise and/or (#138777)"](https://github.com/pytorch/pytorch/commit/c1fe6be202e7d0e768832293368d46f9285ba732)
  - triggering AssertionError: Guard check failed: 14/2: name 'BitwiseFn_bitwise_or' is not defined ([comment](https://github.com/pytorch/pytorch/pull/138777#issuecomment-2477477776))
- [Revert "use more elements per thread for narrow dtypes (#139449)"](https://github.com/pytorch/pytorch/commit/adcff4bff0927d630f4f6c21e4c398db9d0a20fd)
  - breaks tests ([comment](https://github.com/pytorch/pytorch/pull/139449#issuecomment-2477012582))
- [Revert " [Environment Variable][5/N] Use thread-safe getenv functions  (#139762)"](https://github.com/pytorch/pytorch/commit/2675ef8758cf4939bd93fd75a9acb64f3cf4e204)
  - One of these diffs had incorrect downstream optional handling, we must reaudit all of these diffs ([comment](https://github.com/pytorch/pytorch/pull/139762#issuecomment-2474174813))
- [Revert "[Environment Variable][6/N] Use thread-safe getenv functions (#140200)"](https://github.com/pytorch/pytorch/commit/a58a565819c01bf3d69bd2e422a5bf2b31f0d43d)
  - One of these diffs had incorrect downstream optional handling, we must reaudit all of these diffs ([comment](https://github.com/pytorch/pytorch/pull/140200#issuecomment-2473956859))
- [Revert "Allow NJT by default for weights_only torch.load (#140304)"](https://github.com/pytorch/pytorch/commit/5dc6b8c19ef950c5155674140c30a9be19ce74e6)
  - Breaking internal tests due to missing torch.nested._internal ([comment](https://github.com/pytorch/pytorch/pull/140304#issuecomment-2473928461))
- [Revert "[Environment Variable][4/N] Use thread-safe getenv functions (#137843)"](https://github.com/pytorch/pytorch/commit/c6a29fc3d8b67f0efa5f92c2ea8251335bbde55e)
  - One of these diffs had incorrect downstream optional handling, we must reaudit all of these diffs ([comment](https://github.com/pytorch/pytorch/pull/137843#issuecomment-2473709760))
- [Revert "[Environment Variable][7/N] Use thread-safe getenv functions (#140211)"](https://github.com/pytorch/pytorch/commit/4a18e26ff51422c6e6d6d03b7349c2fef68c4f47)
  - One of these diffs had incorrect downstream optional handling, we must reaudit all of these diffs ([comment](https://github.com/pytorch/pytorch/pull/140211#issuecomment-2473709246))
- [Revert "[SymmetricMemory] improve the API for stream_write_value32 (#139934)"](https://github.com/pytorch/pytorch/commit/5f4a21dc58c7b0a732ae0dec8fdbf2dfbda4e7d5)
  - Broke distributed tests, see https://github.com/pytorch/pytorch/actions/runs/11770673088/job/32784210441 ([comment](https://github.com/pytorch/pytorch/pull/139934#issuecomment-2468641512))

### Weird (1)

- [Revert "Add missing pytorch-linux-jammy-py3.12-triton-cpu Docker image (#140571)"](https://github.com/pytorch/pytorch/commit/c25999bdc04b88b094cc47c89351a95b03ed9f3a)
  - Not sure why lint fails, maybe a landrace ([comment](https://github.com/pytorch/pytorch/pull/140571#issuecomment-2474627883))
