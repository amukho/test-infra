# Week of 2024-11-18 to 2024-11-25 (30)

### GHFirst (8)

- [Revert "Add skip_first_wait to profiler.schedule (#141070)"](https://github.com/pytorch/pytorch/commit/e3cb1675604924822250cec66cbb0f0f832941ea)
  - oops, it's actually reverted internally ([comment](https://github.com/pytorch/pytorch/pull/141070#issuecomment-2496141168))
- [Revert "Add skip_first_wait to profiler.schedule (#141070)"](https://github.com/pytorch/pytorch/commit/c513f01516673898d551818c8ca6085cf07e4006)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/141070#issuecomment-2495671689))
- [Revert "[ROCm][CI] upgrade CI to ROCm 6.2.4 (#140851)"](https://github.com/pytorch/pytorch/commit/5ab5a61671289f898ed69ca1a06db491dd9e3ea9)
  - Need to upgrade libtorch images to ROCm 6.2.4 as well ([comment](https://github.com/pytorch/pytorch/pull/140851#issuecomment-2492641342))
- [Revert "[Environment Variable][7/N] Use thread-safe getenv functions (#140211)"](https://github.com/pytorch/pytorch/commit/614e7271918723dc06f2694221385b2c3bbf02d4)
  - causes crash internally during test listing ([comment](https://github.com/pytorch/pytorch/pull/140211#issuecomment-2492328790))
- [Revert "[export] serialize sympy.Exprs as ASTs instead of strings (#140084)"](https://github.com/pytorch/pytorch/commit/d3c8f1af8de5103ad5da5b4444cc45b75cc5719d)
  - reverted internally in D66253238 ([comment](https://github.com/pytorch/pytorch/pull/140084#issuecomment-2492165667))
- [Revert "Add back DistributedDataParallel types that were lost when pyi was removed (#136835)"](https://github.com/pytorch/pytorch/commit/abaab5da059019c9546bee3024e6308061a4d890)
  - breaking typechecks in meta code ([comment](https://github.com/pytorch/pytorch/pull/136835#issuecomment-2489638528))
- [Revert "[PGNCCL] Add an API to get the status/error code of each PG (#140087)"](https://github.com/pytorch/pytorch/commit/9fac5a16fdb7af6bd56c9d69fab31fc99232be64)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/140087#issuecomment-2486912231))
- [Revert "Implements user buffer registration using MemPool (#133603)"](https://github.com/pytorch/pytorch/commit/496c1e78c528893a0830fe75df939163cc135f2c)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/133603#issuecomment-2486897708))

### Ignored Signal (2)

- [Revert "Fix pytorch-triton nightly checksum shorthand (#141410)"](https://github.com/pytorch/pytorch/commit/66f255032821bba443c8c6133d423fcd607b0cbb)
  - There is still a small tweak that I need to do 35c6c7c628 is now git35c6c7c6 so a prefix is needed, going to revert and reland this ([comment](https://github.com/pytorch/pytorch/pull/141410#issuecomment-2495291851))
- [Revert "Switch to using Python nested int (#141166)"](https://github.com/pytorch/pytorch/commit/2e7ba0b194cdb9e1120c88ffc338d88bfcd7beab)
  - broke docs [GH job link](https://github.com/pytorch/pytorch/actions/runs/11980936976/job/33406870951) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/e2e8a7fa2e519433a4ec1071f80d2f6f843c6300) ([comment](https://github.com/pytorch/pytorch/pull/141166#issuecomment-2495112297))

### Landrace (3)

- [Revert "Move Sympy printers to torch/utils/_sympy/printers.py (#140597)"](https://github.com/pytorch/pytorch/commit/f23621ec563562c2e53f1e909a4043c10752c789)
  - Trunk is sad again after this lands, this looks like a landrace this time, so please do a rebase ([comment](https://github.com/pytorch/pytorch/pull/140597#issuecomment-2494052978))
- [Revert "[sparse] add extra options to _cslt_spare_mm (#137427)"](https://github.com/pytorch/pytorch/commit/cc90ba89240f0105a1d04523b4250d26b0720888)
  - Sorry for reverting your change but test_sparse_semi_structured is failing in trunk after it lands ([comment](https://github.com/pytorch/pytorch/pull/137427#issuecomment-2494047577))
- [Revert "[1/N] Remove inclusion of ATen/core/Array.h (#122064)"](https://github.com/pytorch/pytorch/commit/6c6f745fa7a591263184fdf1972b96ac20da3bb7)
  - Sorry for reverting your change, but lots of compilation errors show up after this lands ([comment](https://github.com/pytorch/pytorch/pull/122064#issuecomment-2482263396))

### Not through pytorchbot (2)

- [Revert "[dynamo] Added cuda and triton versions to dynamo_compile" (#141280)](https://github.com/pytorch/pytorch/commit/149677e30c8442e58046caaacb5b5071b3f2433b)
- [Revert "Enable XPUEvent elapsed_time function (#134666)" (#140872)](https://github.com/pytorch/pytorch/commit/62d2c5b66737d3ddb6d570f951ea7574bd9a2987)

### No Signal (11)

- [Revert "Always unspecialize float in OSS (#138922)"](https://github.com/pytorch/pytorch/commit/a8c90e5140909b05c44baef93f3f30c429960919)
  - Sorry for reverting your change but there is some slow tests failing after this land ([comment](https://github.com/pytorch/pytorch/pull/138922#issuecomment-2495076878))
- [Revert "Forward / backward NJT support for several activation functions (#140736)"](https://github.com/pytorch/pytorch/commit/0be0c944b191a3c2f77605122cc411dd904d9e2b)
  - Sorry for reverting your change but its tests are failing in trunk ([comment](https://github.com/pytorch/pytorch/pull/140736#issuecomment-2495075871))
- [Revert "[CI, 3.13] enable 3.13 CI (#139533)"](https://github.com/pytorch/pytorch/commit/2239d1a7a3cfafdcb03b63ab043fa018bb544aa1)
  - Sorry for reverting your change but it is failing test_cpp_extensions_open_device_registration. The test was wrongly excluded by TD ([comment](https://github.com/pytorch/pytorch/pull/139533#issuecomment-2494328806))
- [Revert "[CI] Reduce distributed test timeout to 60s (#141168)"](https://github.com/pytorch/pytorch/commit/080f992d68885cc6a0a36a6678a847a4f95c9453)
  - Sorry for reverting your change but I think we missed inductor tests ([comment](https://github.com/pytorch/pytorch/pull/141168#issuecomment-2494060624))
- [Revert "Fix MPS synchronize by waiting for root buffer to complete (#140725)"](https://github.com/pytorch/pytorch/commit/5e54cf36879a09e053ad3d4c17ed2d14ef819232)
  - It causes deadlocks when I try to run something benchmark from  https://github.com/pytorch/pytorch/pull/127242 ([comment](https://github.com/pytorch/pytorch/pull/140725#issuecomment-2492416501))
- [Revert "Move Sympy printers to torch/utils/_sympy/printers.py (#140597)"](https://github.com/pytorch/pytorch/commit/701e06b643093942bab060642c347d15498a9663)
  - Sorry for reverting your change but I think it fails inductor/test_padding in trunk. This is a target determination miss and that failed test was not run in your PR ([comment](https://github.com/pytorch/pytorch/pull/140597#issuecomment-2489641453))
- [Revert "Implement deterministic scan (#140887)"](https://github.com/pytorch/pytorch/commit/7f10351ba08a1a378ede92c8d70fe3adb7f94900)
  - breaks with 11.4 ([comment](https://github.com/pytorch/pytorch/pull/140887#issuecomment-2486409438))
- [Revert "[dynamo][guards] Consider tensors as immutable for dict tag matches (#139560)"](https://github.com/pytorch/pytorch/commit/d276688da6c1881d058670624fda4589f68b4571)
  - internal test failures ([comment](https://github.com/pytorch/pytorch/pull/139560#issuecomment-2486344859))
- [Revert "[inductor] Refactor MutableBox to make IRNode typing easier (#140895)"](https://github.com/pytorch/pytorch/commit/d472a5f6807b127414d31658078a70a78c0c98f4)
  - Sorry for reverting your change but I think test_torchbind_inductor is failing in trunk after this lands ([comment](https://github.com/pytorch/pytorch/pull/140895#issuecomment-2484679319))
- [Revert "FlopCounterMode: Decompose ops for inference mode (#138508)"](https://github.com/pytorch/pytorch/commit/727f1a6da98ca6ccbd99b074d564cf803ecfa2ca)
  - Failing internal jobs ([comment](https://github.com/pytorch/pytorch/pull/138508#issuecomment-2484310587))
- [Revert "create a new torch.cuda.device_memory_used api (#140870)"](https://github.com/pytorch/pytorch/commit/43de32d9481deb7d50957e1b86a1d307d73b758f)
  - the test is still flaky on ROCm, test_cuda.py::TestCudaMallocAsync is not skipped with the unittest.skipIf(TEST_CUDAMALLOCASYNC ([comment](https://github.com/pytorch/pytorch/pull/140870#issuecomment-2484161914))

### Weird (4)

- [Revert "[triton] Update pin for PyTorch 2.6/Triton 3.2 (#139206)"](https://github.com/pytorch/pytorch/commit/44d5012a80e9b9c0f28dfc9927bfe8157412254d)
  - Will revert and reland skipping xpu builds ([comment](https://github.com/pytorch/pytorch/pull/139206#issuecomment-2494437857))
- [Revert "Add option to split Linear gates for Quantizable LSTM into separate ops (#140868)"](https://github.com/pytorch/pytorch/commit/cf1d95a965e419cfc3473996aecf50ee9e360a2e)
  - Sorry for reverting your change but I think lint is failing on this in trunk ([comment](https://github.com/pytorch/pytorch/pull/140868#issuecomment-2494076202))
- [Revert "[MPS] Expand fused forloop to bfloat16 (#141104)"](https://github.com/pytorch/pytorch/commit/989888236e76d8898890e995c38dfc6cfc9ec097)
  - Want to add test script to the commit message ([comment](https://github.com/pytorch/pytorch/pull/141104#issuecomment-2492659931))
- [Revert "Record PR time benchmark results in JSON format (#140493)"](https://github.com/pytorch/pytorch/commit/a4e8ca789a6a8c5b4c0da202a2b099f854b0974a)
  - I think I missed something in the workflow setup as the test is failing in non-test CI jobs ([comment](https://github.com/pytorch/pytorch/pull/140493#issuecomment-2487360455))
