# Week of 2025-02-24 to 2025-03-03 (30)

### GHFirst (19)

- [Revert "stage 1 of depreate silent fallback of tuning gemm (#147798)"](https://github.com/pytorch/pytorch/commit/1919e0de9aa29f13529542af5e5115396afbaf93)
  - failing internal builds, discussed with author ([comment](https://github.com/pytorch/pytorch/pull/147798#issuecomment-2692390551))
- [Revert "[async TP] insert reshape node to handle "reshape -> scaled mm -> reshape pattern" in async TP with rowwise scales (#148001)"](https://github.com/pytorch/pytorch/commit/191c9bd013c4791ff572387ead32c69312ad954b)
  - looks like another lint error ([comment](https://github.com/pytorch/pytorch/pull/148001#issuecomment-2692042859))
- [Revert "[async TP] insert reshape node to handle "reshape -> scaled mm -> reshape pattern" in async TP with rowwise scales (#148001)"](https://github.com/pytorch/pytorch/commit/ebc3f27bf410488f56ec99b647efe976c970bd53)
  - lint error ([comment](https://github.com/pytorch/pytorch/pull/148001#issuecomment-2691421540))
- [Revert "Build a storage reader/writer to write checkpoints in HF format (#147622)"](https://github.com/pytorch/pytorch/commit/c622796cde9ecd045a0d2bfc383b4ee7a66efd1a)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/147622#issuecomment-2686932514))
- [Revert "Support torch.compile rng selective activation checkpointing with cudagraph (#146878)"](https://github.com/pytorch/pytorch/commit/17358ce77883b5d3666bb3fa20df8635d3d271f1)
  - lint failure ([comment](https://github.com/pytorch/pytorch/pull/146878#issuecomment-2686767956))
- [Revert "[dynamo] add sourceless builder for `types.MethodType` (#147880)"](https://github.com/pytorch/pytorch/commit/915eb012e1d6df98e7db6907fa51ed1ab14b7332)
  - failing trunk tests ([comment](https://github.com/pytorch/pytorch/pull/147880#issuecomment-2686436432))
- [Revert "torch._scaled_mm with MXFP8 (#147548)"](https://github.com/pytorch/pytorch/commit/a84db75e1ba72dcda52c7c5e432a253220d70fa7)
  - failing internal build - similar to previous, see below ([comment](https://github.com/pytorch/pytorch/pull/147548#issuecomment-2684134336))
- [Revert "[AOTI][refactor] Consolidate CppBuilder.build and CppBuilder.build_fbcode_cpu_re (#147803)"](https://github.com/pytorch/pytorch/commit/acca9b9cb0a38b2eb1bfd5fe0aaff3760dd77812)
  - breaking internal tests, discussed with author ([comment](https://github.com/pytorch/pytorch/pull/147803#issuecomment-2683938121))
- [Revert "[ca] trace saved variable unpacking (#147242)"](https://github.com/pytorch/pytorch/commit/90e3a3d86d6139a7b00bdf56bdfe0f63ad18e980)
  - failing tests in the slow workflow, see below ([comment](https://github.com/pytorch/pytorch/pull/147242#issuecomment-2683604547))
- [Revert "[ca] side-effect free initial trace: GraphTask (#147796)"](https://github.com/pytorch/pytorch/commit/4d614baa301eddc31d36cc2e1da3ee17f6f30931)
  - failing tests in the slow workflow, see below ([comment](https://github.com/pytorch/pytorch/pull/147796#issuecomment-2683599896))
- [Revert "[ca] side-effect free inital trace: compiled_args (#147804)"](https://github.com/pytorch/pytorch/commit/143f0f0006fa54f401715c944167d84b3e477674)
  - failing tests in the slow workflow, see below ([comment](https://github.com/pytorch/pytorch/pull/147804#issuecomment-2683594740))
- [Revert "torch._scaled_mm with MXFP8 (#147548)"](https://github.com/pytorch/pytorch/commit/c82c1411c61b645426f7680f7803d84352729142)
  - failing internal build - discussed with author ([comment](https://github.com/pytorch/pytorch/pull/147548#issuecomment-2683517851))
- [Revert "follow up to #147548, fix regression on MI300 (#147878)"](https://github.com/pytorch/pytorch/commit/05bc8fe62e38fa5f11b12a14bf644431e31ab48e)
  - temporary reverting to revert an older one in the stack ([comment](https://github.com/pytorch/pytorch/pull/147878#issuecomment-2683515567))
- [Revert "Add option to limit number of SMs used by matmul kernels (#144974)"](https://github.com/pytorch/pytorch/commit/1e894d26352160204c8980e3cf29a091fa4a3cd4)
  - reverting in order to revert #147548 that causes a merge conflict ([comment](https://github.com/pytorch/pytorch/pull/144974#issuecomment-2683461733))
- [Revert "[inductor][triton] Ignore block ptr advances for removed buffers (#147193)"](https://github.com/pytorch/pytorch/commit/0d31c621a37f5283d757ca4f88973b339566a039)
  - failing tests on trunk - see below ([comment](https://github.com/pytorch/pytorch/pull/147193#issuecomment-2683286358))
- [Revert "use copy2d in h2d/d2h copy when possible (#146256)"](https://github.com/pytorch/pytorch/commit/fb73b0c7c55921e751dd7bd16900536ca5523379)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/146256#issuecomment-2680868627))
- [Revert "[AOTI][refactor] Rename use_absolute_path to use_relative_path (#147679)"](https://github.com/pytorch/pytorch/commit/890213f65f98c16e3126d73388b9d8067531141d)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/147679#issuecomment-2680389225))
- [Revert "[AOTI][refactor] Replace run_command_and_check with CppBuilder.build (#147680)"](https://github.com/pytorch/pytorch/commit/9b06b3046869add003a9eea9ffc38318cde41368)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/147680#issuecomment-2680383986))
- [Revert "Upgrade submodule oneDNN to v3.7 (#147498)"](https://github.com/pytorch/pytorch/commit/e72b4c61bf19a1a1195cfe1d5ea6c616d2c485d8)
  - failing some tests on trunk - see below ([comment](https://github.com/pytorch/pytorch/pull/147498#issuecomment-2679867286))

### Landrace (2)

- [Revert "introduce dynamism library (#147981)"](https://github.com/pytorch/pytorch/commit/8e004865dd5bb00196632f7f76f872cba52224ad)
  - lint failure ([comment](https://github.com/pytorch/pytorch/pull/147981#issuecomment-2692351017))
- [Revert "introduce dynamism library (#147981)"](https://github.com/pytorch/pytorch/commit/baf1c8fcdcc43f993c6c8cc3f377b090d8117ee2)
  - lint failure ([comment](https://github.com/pytorch/pytorch/pull/147981#issuecomment-2691906065))

### Not through pytorchbot (1)

- [Revert D70262395 (#148164)](https://github.com/pytorch/pytorch/commit/ea12fc8a9ff7da808e0b661ca07e9d4ce75d04bc)

### No Signal (4)

- [Revert "[c10d] Add hccl distributed backend to c10d data structures (#146478)"](https://github.com/pytorch/pytorch/commit/94afb165d9449e5ac42472298d4aad423e17d64d)
  - This seems to break ROCM tests, see https://hud.pytorch.org/pytorch/pytorch/commit/dae3fbfe9720e83e7e81d41430fb5067221bbed7 ([comment](https://github.com/pytorch/pytorch/pull/146478#issuecomment-2692913573))
- [Revert "Remove NO_MULTIPROCESSING_SPAWN checks (#146705)"](https://github.com/pytorch/pytorch/commit/926b7b5027c1bf0365573ceb9172413eab1420e4)
  - Broke lint?, I guess land race with rufff update ([comment](https://github.com/pytorch/pytorch/pull/146705#issuecomment-2689603077))
- [Revert "optimize the decomposition of aten.native_group_norm (#144733)"](https://github.com/pytorch/pytorch/commit/644d84d594ba5d875dca83771e3abdf956251cb6)
  - Cause TIMM pass rate regression on H100, see https://hud.pytorch.org/benchmark/compilers?dashboard=torchinductor&startTime=Thu%2C%2020%20Feb%202025%2020%3A53%3A55%20GMT&stopTime=Thu%2C%2027%20Feb%202025%2020%3A53%3A55%20GMT&granularity=hour&mode=training&dtype=amp&deviceName=cuda%20(h100)&lBranch=main&lCommit=4216478250e08e950fdd090fc23a1b270c520cc4&rBranch=main&rCommit=4986f0f52eb871cdb91b8124ee162cfe622b8688 ([comment](https://github.com/pytorch/pytorch/pull/144733#issuecomment-2689092714))
- [Revert "[TorchRec][PT2] disable contextlib in PT2 train pipeline (#147254)"](https://github.com/pytorch/pytorch/commit/5b6ad682bc32032a92cd3a15794b5232bffb5a63)
  - introduced reds on main ([comment](https://github.com/pytorch/pytorch/pull/147254#issuecomment-2677700862))

### Weird (4)

- [Revert "Initial implementation of host memory stats (#147660)"](https://github.com/pytorch/pytorch/commit/a983b2b11add71d7994c83dcc139c7c88fb2b183)
  - There is an issue with ambiguous definition of Stat structure when different C++ tools are used. Backing out for now. ([comment](https://github.com/pytorch/pytorch/pull/147660#issuecomment-2692346379))
- [Revert "[do not merge yet] update grammar  (#147996)"](https://github.com/pytorch/pytorch/commit/7e7d05bf85f3be667df941c7e2d1ab2772e099bc)
  - Need to revert ([comment](https://github.com/pytorch/pytorch/pull/147996#issuecomment-2686291282))
- [Revert "[do not merge yet] update grammar  (#147996)"](https://github.com/pytorch/pytorch/commit/dc7556f1bdb059f95447c223773ea1407208a8e3)
  - Need to revert ([comment](https://github.com/pytorch/pytorch/pull/147996#issuecomment-2686266052))
- [Revert "[ROCm] Update periodic.yml to use 2GPU runners (#146839)"](https://github.com/pytorch/pytorch/commit/900a7747813ee5365cb71f207c80bee740222cd4)
  - This change is not needed anymore since our 4-GPU runners are back online and stable so far ([comment](https://github.com/pytorch/pytorch/pull/146839#issuecomment-2679145448))
