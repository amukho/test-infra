# Week of 2024-12-09 to 2024-12-16 (35)

### GHFirst (15)

- [Revert "Tests Generelization for multiple accelerator devices (#139184)"](https://github.com/pytorch/pytorch/commit/c85323c5e8205888e220030c1b15551acd76b51c)
  - Failing internally when trying to pickle distributed test files D67098795 ([comment](https://github.com/pytorch/pytorch/pull/139184#issuecomment-2539610187))
- [Revert "[14/N] Fix extra warnings brought by clang-tidy-17 (#141644)"](https://github.com/pytorch/pytorch/commit/2f0fe82f6d0322d9d9883a5905eb4787750ce700)
  - failing internally D67112938 ([comment](https://github.com/pytorch/pytorch/pull/141644#issuecomment-2539602023))
- [Revert "Prologue Fusion (#134532)"](https://github.com/pytorch/pytorch/commit/233853a66f928890a4a934340e83e61cfaad4989)
  - A couple of PRs in this stack are breaking internally on different tests ([comment](https://github.com/pytorch/pytorch/pull/134532#issuecomment-2536643675))
- [Revert "Update low prec codegen for div/mod (#142350)"](https://github.com/pytorch/pytorch/commit/f0b80d014d7cf091f277d81dcbb37c9c7cd1b367)
  - A couple of PRs in this stack are breaking internally on different tests ([comment](https://github.com/pytorch/pytorch/pull/134532#issuecomment-2536643675))
- [Revert "[Easy] factor out inductor ophandler decompositions (#142400)"](https://github.com/pytorch/pytorch/commit/829a93562a44e52553dd4a70378ca4e0fb77892b)
  - A couple of PRs in this stack are breaking internally on different tests ([comment](https://github.com/pytorch/pytorch/pull/134532#issuecomment-2536643675))
- [Revert "Add a pass which analyzes whether a prologue preserves zero mask (#142401)"](https://github.com/pytorch/pytorch/commit/9e882797379a84d8bb06917881303455bfab1284)
  - A couple of PRs in this stack are breaking internally on different tests ([comment](https://github.com/pytorch/pytorch/pull/134532#issuecomment-2536643675))
- [Revert "Infer whether prologues can be computed without upcasting to fp32 without changing numerics (#142402)"](https://github.com/pytorch/pytorch/commit/b118702a4e8fa78f9e41e27381b0f59b14aa65e2)
  - A couple of PRs in this stack are breaking internally on different tests ([comment](https://github.com/pytorch/pytorch/pull/134532#issuecomment-2536643675))
- [Revert "dont attempt to fuse in unaligned accesses to mm (#142435)"](https://github.com/pytorch/pytorch/commit/2dcba6eac862a5cbfd85b3f7b064681f721b637d)
  - A couple of PRs in this stack are breaking internally on different tests ([comment](https://github.com/pytorch/pytorch/pull/134532#issuecomment-2536643675))
- [Revert "Remove unused Python variables in torch/[_-a]* (#133492)"](https://github.com/pytorch/pytorch/commit/5c97ac9721b7c645d6bb0beb1a09e8c44cc0947b)
  - Sorry, I need to revert this in order to revert something else.  The only thing you need to do is rebase and remerge ([comment](https://github.com/pytorch/pytorch/pull/133492#issuecomment-2536635516))
- [Revert "filelock: Make waitcounter variant to use (#139816)"](https://github.com/pytorch/pytorch/commit/2374d460d0ec135c4c965cf1059dba2dfe85d3be)
  - Sorry, I need to revert this in order to revert something else.  The only thing you need to do is rebase and remerge ([comment](https://github.com/pytorch/pytorch/pull/139816#issuecomment-2536616808))
- [Revert "[dynamo] Support multiple inheritance for custom dict construction (#142416)"](https://github.com/pytorch/pytorch/commit/8fd4b26504afc75d6008ea1bf55e2c2f057b1687)
  - The newly added test is faling internally D67056273 ([comment](https://github.com/pytorch/pytorch/pull/142416#issuecomment-2536537693))
- [Revert "[Inductor][Easy] Fix a test failure in loop_ordering_after_fusion (#142273)"](https://github.com/pytorch/pytorch/commit/24650c3caa303c907af1aaea8984639bd891dd7f)
  - Internal has been ninja unlanded D66906175 ([comment](https://github.com/pytorch/pytorch/pull/142273#issuecomment-2530751665))
- [Revert "[AOTI XPU] Support AOT Inductor for Intel GPU. (#140269)"](https://github.com/pytorch/pytorch/commit/219e9c83a5850495f7ad3883fc93bf638a94c513)
  - breaks forward compatibility?  D66937097 ([comment](https://github.com/pytorch/pytorch/pull/140269#issuecomment-2528828555))
- [Revert "[AOTI] Fix #140546 and support AOTI package load for Intel GPU. (#140664)"](https://github.com/pytorch/pytorch/commit/6fcb294e18adf84ea97465da249be922204658b9)
  - breaks forward compatibility?  D66937097 ([comment](https://github.com/pytorch/pytorch/pull/140269#issuecomment-2528828555))
- [Revert "export AOTI_TORCH_EXPORT on Windows. (#140030)"](https://github.com/pytorch/pytorch/commit/90fc2b42e3e2d51b26a96df0dff4a644e218f8ab)
  - still has failures internally when building, D66923759 ([comment](https://github.com/pytorch/pytorch/pull/140030#issuecomment-2528760716))

### Ignored Signal (2)

- [Revert "[CI] Add Triton 3.13t build (#143212)"](https://github.com/pytorch/pytorch/commit/4e0de50eb5510e0c483cbd8f16527b59a6a53334)
  - lint is failing, the other failures don't seem relevant but ci has turned red after this change haha ([comment](https://github.com/pytorch/pytorch/pull/143212#issuecomment-2542521875))
- [Revert "Hide torch_python symbols (#142214)"](https://github.com/pytorch/pytorch/commit/cf538efd0c4c2a6853311623a12972d0fd5a6e81)
  - The MacOS failure looks legit as it shows up in trunk ([comment](https://github.com/pytorch/pytorch/pull/142214#issuecomment-2539543504))

### Landrace (2)

- [Revert "skip test dynamo for aot_dispatch tests on ci (#142185)"](https://github.com/pytorch/pytorch/commit/3e28da1e06ba17ed86af7df28c1ddd38dbe1409f)
  - Sorry for reverting your change, but I think it has a landrace in trunk ([comment](https://github.com/pytorch/pytorch/pull/142185#issuecomment-2532605728))
- [Revert "[hop][dynamo] support torch.SymInt inputs (#141524)"](https://github.com/pytorch/pytorch/commit/9aefc59649fa66780be70f1122eb212a0e85e54c)
  - Sorry for reverting your change, but I think it has a landrace in trunk ([comment](https://github.com/pytorch/pytorch/pull/142185#issuecomment-2532605728))

### No Signal (11)

- [Revert "[Profiler] Add Optional Flag to turn off external correlations (#142516)"](https://github.com/pytorch/pytorch/commit/9ed045eae928cd184e92e5d3853b071b28c7a13d)
  - Sorry for reverting your change but the test is failing on ROCm ([comment](https://github.com/pytorch/pytorch/pull/142516#issuecomment-2543431758))
- [Revert "Migrate compiler config to Config (#143152)"](https://github.com/pytorch/pytorch/commit/e87f07d3b8c790ea1556b2cfe9689b01638fec54)
  - lint failure ([comment](https://github.com/pytorch/pytorch/pull/143152#issuecomment-2542342073))
- [Revert "[Dynamo] only import einops if version is lower than 0.7.0 (#142847)"](https://github.com/pytorch/pytorch/commit/d48b16a7251c66668129f2405cea3b085b4809d7)
  - Breaks binary builds, see the comment above ([comment](https://github.com/pytorch/pytorch/pull/142847#issuecomment-2539759580))
- [Revert "[Inductor] Use sleef implementation for CPP backend asinh codegen (#142360)"](https://github.com/pytorch/pytorch/commit/cd1b5924d5338445424ce4a001544f6b4997a78a)
  - seems to have broken macos tests ([comment](https://github.com/pytorch/pytorch/pull/142360#issuecomment-2539143039))
- [Revert "[RELAND] Add UTs for accelerator device-agnostic runtime APIs (#133572)"](https://github.com/pytorch/pytorch/commit/1b3f8b75896720e88362cbec7db32abc52afa83e)
  - Sorry for reverting your change but the new test is still very flaky on MacOS even when it does not segfault anymore ([comment](https://github.com/pytorch/pytorch/pull/133572#issuecomment-2537256522))
- [Revert "[RELAND] Add device-agnostic runtime Device/Stream C++ API (#138677)"](https://github.com/pytorch/pytorch/commit/dfe5669076762a745824f6a283ca7e42ed41ea39)
  - Sorry for reverting your change but the new test is still very flaky on MacOS even when it does not segfault anymore ([comment](https://github.com/pytorch/pytorch/pull/133572#issuecomment-2537256522))
- [Revert "[MPS] Add CompileShader method (#141478)"](https://github.com/pytorch/pytorch/commit/393cf46f42b34da6b924d24fd689b32a55c3aa07)
  - Broke doctests, by trying to run MPS example on Linux ([comment](https://github.com/pytorch/pytorch/pull/141478#issuecomment-2533351909))
- [Revert "[BE] Add type annotation to eliminate_dead_code (#142251)"](https://github.com/pytorch/pytorch/commit/75530885ba489a0104aa08d19e0e4f26b62e8ca6)
  - checking if reverting will fix 'FAILED [5.0221s] test_dataloader.py::TestIndividualWorkerQueue::test_ind_worker_queue' on windows ([comment](https://github.com/pytorch/pytorch/pull/142251#issuecomment-2531706362))
- [Revert "[inductor][cpp] Add FlexAttention support for CPU inference  (#141453)"](https://github.com/pytorch/pytorch/commit/beeffe77e4bf5b0be94dc3d448591018d55892dc)
  - This breaks tests on platforms compiled without MKLDNN, namely MacOS, see https://github.com/pytorch/pytorch/actions/runs/12245441371/job/34159967794 ([comment](https://github.com/pytorch/pytorch/pull/141453#issuecomment-2529710573))
- [Revert "add torchrec collectives to enforce global ordering (#141970)"](https://github.com/pytorch/pytorch/commit/5c76a2834d9e939b5d93cebcce77c19994c67d0c)
  - Apologies for reverting this change, but it broke MacOS testing, but CI was broken at the time ([comment](https://github.com/pytorch/pytorch/pull/141970#issuecomment-2529367680))
- [Revert "[inductor][cpp] Add FlexAttention support for CPU inference  (#141453)"](https://github.com/pytorch/pytorch/commit/7101dcfb98baa4eaf1f0c16b1c8d0b71e48db3b4)
  - Sorry for reverting your change but I think it is failing periodic NO_AVX2 ([comment](https://github.com/pytorch/pytorch/pull/141453#issuecomment-2527377475))

### Weird (5)

- [Revert "[ROCm] Prune old gfx archs gfx900/gfx906 from binaries (#142827)"](https://github.com/pytorch/pytorch/commit/f406207af2bad07c294badef24c2f56680e74442)
  - prematurely dropped support for gfx900/gfx906 ([comment](https://github.com/pytorch/pytorch/pull/142827#issuecomment-2542507857))
- [Revert "[BE][accelerator] formalize API name `{current,set}_device_{idx => index}` (#140542)"](https://github.com/pytorch/pytorch/commit/cd50bd8477ca7c23a97a5ccc361ca2f3fbc16d4d)
  - Sorry for reverting your change, but I need to revert this in order to revert https://github.com/pytorch/pytorch/pull/133572#issuecomment-2537204202 due to a conflict ([comment](https://github.com/pytorch/pytorch/pull/140542#issuecomment-2537253665))
- [Revert "Add UTs for accelerator device-agnostic runtime APIs (#133572)"](https://github.com/pytorch/pytorch/commit/a1c6cf7e9f3ad962926379d7c54b3e88463a6d09)
  - Sorry for reverting your PR, but it segfaults on MacOS ([comment](https://github.com/pytorch/pytorch/pull/133572#issuecomment-2530354401))
- [Revert "Add device-agnostic runtime Device/Stream C++ API (#138677)"](https://github.com/pytorch/pytorch/commit/adbfdbd6a0118f074ad862911e2ddb56387120f1)
  - Sorry for reverting your PR, but it segfaults on MacOS ([comment](https://github.com/pytorch/pytorch/pull/133572#issuecomment-2530354401))
- [Revert "temporarily turn on keep-going/continue on error for mac (#142421)"](https://github.com/pytorch/pytorch/commit/871b52439860f9872a3634e8018c55398716f75a)
  - We've collected enough info for now ([comment](https://github.com/pytorch/pytorch/pull/142421#issuecomment-2530010220))
